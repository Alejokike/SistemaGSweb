@page "/Inventario"
@page "/Inventario/{ID:int}"

@inject IInventarioService inventarioService;
@inject IToastService toastService;
@inject NavigationManager _navService;
@inject AuthenticationStateProvider authenticationStateProvider;

@attribute [Authorize(Roles = "Funcionario")]

<PageTitle>Inventario</PageTitle>

<AuthorizeView>
    <Authorized>
        @{
            int IdLogged = Convert.ToInt32((context.User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.NameIdentifier)!.Value ?? "0"));
            
            string Rol = context.User.Claims.FirstOrDefault(u => u.Type == ClaimTypes.Role)!.Value;
            if (ID != IdLogged && Rol != "Administrador") _navService.NavigateTo($"/Usuario/{IdLogged}");
        }
    </Authorized>
</AuthorizeView>

<BlazoredToasts />

@code{

    [Parameter]
    public int ID { get; set; }

}